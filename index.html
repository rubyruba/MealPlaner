<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Meal Planner
    </title>
    <style>
        ul{
            list-style-type: none;
        }
    </style>
    <style>
        #meal-card {
         margin: 20%;
       display: flex;
       flex-wrap: wrap;
       justify-content: space-between;
       padding: 20px;
       border: 1px solid #ddd;
       border-radius: 10px;
       box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
     }
     
     #meal-image {
       flex-basis: 30%;
       margin-right: 20px;
     }
     
     #meal-image img {
       width: 100%;
       height: 100%;
       object-fit: cover;
       border-radius: 10px 0 0 10px;
     }
     
     #meal-info {
       flex-basis: 70%;
     }
     
     #meal-info h2 {
       margin-top: 0;
     }
     
     #meal-info ul {
       list-style: none;
       padding: 0;
       margin: 0;
     }
     
     #meal-info ul li {
       display: inline-block;
       margin-right: 10px;
     }
     
     #meal-info ul li:nth-child(1) {
       font-weight: bold;
     }
     
     #meal-info ul li:nth-child(2) ~ li {
       margin-top: 10px;
     }
     
     #meal-info ul:first-child {
       margin-bottom: 20px;
     }
     
     #meal-info ul:first-child li {
       display: inline-block;
       margin-right: 10px;
     }
     
     #meal-info ul:first-child li:nth-child(-n+10) {
       display: inline-block;
       margin-right: 10px;
     }
     
     #meal-info ul:first-child li:nth-child(-n+10):nth-child(odd) {
       background-color: #f0f0f0;
     }

     .myclass {
       
     }
     .description{
        width: auto;
     }
         </style>
</head>
<body>
        <input type="search" id="search-input" placeholder="Search for a meal..."> <!-- search for the meal in order to find what to input-->
        <ul id="search-results"></ul>
        <div id="meal-card">
            <div id="meal-image">
              
            </div>
            <div id="meal-info">
            
            
        </div>


    </div>
    <script>
        async function showRandom(){
            let response = await fetch('https://www.themealdb.com/api/json/v1/1/random.php')
            let data = await response.json()
            let meal = data.meals[0]
            console.log(meal.strMeal);

            let img = document.createElement('img');
            img.src = meal.strMealThumb;
            img.className = 'myclass';
            document.getElementById('meal-image').appendChild(img);

            let title = document.createElement("h2");
            title.textContent = meal.strMeal;
            document.getElementById('meal-info').appendChild(title);

            let category = document.createElement("p");
            category.textContent = "category: " + meal.strCategory;
            document.getElementById('meal-info').appendChild(category);

            let myList = document.createElement("ul");
            myList.id = "listItems";
            myList.textContent = "ingredients: "
            document.getElementById("meal-info").appendChild(myList);
            for(let i=1; i < 21; i++){
                let listItem = document.createElement("li");
                if(meal["strMeasure"+i]!=="" && meal["strIngredient"+i]!=="" ){
                listItem.textContent = meal["strMeasure"+i] +"   " + meal["strIngredient" + i];
                myList.appendChild(listItem);
                }
            }
            document.getElementById("meal-info").appendChild(document.createElement("br"));

            let description = document.createElement("div");
            description.className = "description";
            description.textContent = "Description: \n" +meal.strInstructions;
            document.getElementById("meal-info").appendChild(description);

            let youtubeLink = document.createElement("a");
            youtubeLink.href = meal.strYoutube;
            youtubeLink.textContent = "Instructing video on Youtube";
            document.getElementById("meal-info").appendChild(youtubeLink);
        }
        showRandom()
    </script>
    
    <script>
        let searchInput = document.getElementById('search-input');
        let searchResults = document.getElementById('search-results');

        searchInput.addEventListener('input', async () => {
        let searchTerm = searchInput.value.trim();
        if (searchTerm) {
        let response = await fetch("https://www.themealdb.com/api/json/v1/1/search.php?s=" + searchTerm);
        let data = await response.json();
        let meals = data.meals;
        searchResults.innerHTML = '';
        meals.forEach((meal) => {
          let mealListItem = document.createElement('li');
          mealListItem.textContent = meal.strMeal;
          searchResults.appendChild(mealListItem);
        });
    } else {
        searchResults.innerHTML = '';
    }
    });
    </script>
</body>
</html>